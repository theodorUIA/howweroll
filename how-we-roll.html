<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="utf-8">
    <title>HowWeRoll</title>

    <link rel="stylesheet" href="styles.css" />
</head>
<body>

<!-----------------Header------------------->

<div class="header"><span class="header-text">How We Roll</span></div>

<div class="topnav">
    <a href="index.html">Hjem</a>
    <a class="active" href="how-we-roll.html">Profil</a>
    <a href="hwr-report.html">Rapport</a>
    <input type="button" value="Søk" onclick="OnlyAPlaceHolder()">
    <input type="text" placeholder="Søk...">

</div>
<form id="HWR-form">
    <div class="main-content">

        <!------Overskrift på profilsiden------>

<h2>Registrer din profil her</h2>
        <p>Kartlegg din info og dine preferanser for å gi dine medarbeidere innsikt i deg og dine vaner.</p>

<div id='localstorage-tekst'></div>
<div class="form-div">
<table class="form-table">
    <tr>
        <td class="text-align-right">Fornavn:</td>
        <td class="text-align-left"><input type="text" name="fname" class='form-textinput' placeholder="Fornavn"></td>
        <td class="text-align-right">Etternavn:</td>
        <td class="text-align-left"><input type="text" name="lname" class='form-textinput' placeholder="Etternavn"></td>
    </tr>
    <tr>
        <td class="text-align-right"</td>
        <label for="phone">Telefon:</label>
        <td class="text-align-left"><input type="number" name="phone" id="phone" class='form-textinput' placeholder="Telefon nr"></td>
        <td class="text-align-right"</td>
        <label for="email">E-post:</label>
        <td class="text-align-left"><input type="email" name="email" id="email" class='form-textinput' placeholder="E-post"></td>
        </label>
    </tr>
</table>

    <!-----------Slidere----------->

    <h4>Skriv inn dine ferdigheter her:</h4>
    <label for="ferdigheter">
    <textarea name="ferdigheter" id="ferdigheter" rows="4" cols="50" class="form-ferdigheter"></textarea>
    </label>
    <h4>Når jobber du best?</h4>
    <table class="slidercontainer">
        <tr>
            <label for="hours">
            <td colspan="3"><input type="range" name="hours" id="hours" min="0" max="100" value="50" class="slider"></td>
            </label>
        </tr>
        <tr>
            <td class="text-align-left">Morgenfugl</td>
            <td class="text-align-center">Nøytral</td>
            <td class="text-align-right">Natteravn</td>
        </tr>
    </table>

<h4>Hvor aktiv er du?</h4>
<table class="slidercontainer">
    <tr>
        <label for="akt">
        <td colspan="3"><input type="range" name="akt" id="akt" min="0" max="100" value="50" class="slider"></td>
        </label>
    </tr>
    <tr>
        <td class="text-align-left">Sofagris</td>
        <td class="text-align-center">Moderat</td>
        <td class="text-align-right">Atletisk</td>
    </tr>
</table>
<h4>Hvordan foretrekker du å jobbe?</h4>
<table class="slidercontainer">
    <tr>
        <label for="work">
        <td colspan="3"><input type="range" name="work" id="work" min="0" max="100" value="50" class="slider"></td>
        </label>
    </tr>
    <tr>
        <td class="text-align-left">Selvstendig</td>
        <td class="text-align-center">Nøytral</td>
        <td class="text-align-right">Samarbeid</td>
    </tr>
</table>

<h4>Foretrekker du hjemmekontor eller fysisk oppmøte?</h4>
<table class="slidercontainer">
    <tr>
        <label for="dify">
        <td colspan="3"><input type="range" name="dify" id="dify" min="0" max="100" value="50" class="slider"></td>
        </label>
    </tr>
    <tr>
        <td class="text-align-left">Hjemmekontor</td>
        <td class="text-align-center">Nøytral</td>
        <td class="text-align-right">Fysisk</td>
    </tr>
</table>

<h4>Foretrekker du å fortelle bakgrunnshistorie eller gå rett på sak?</h4>

<table class="slidercontainer">
<tr>
    <label for="bgrp">
    <td colspan="3"><input type="range" name="bgrp" id="bgrp" min="0" max="100" value="50" class="slider"></td>
    </label>
</tr>
<tr>
    <td class="text-align-left">Bakgrunnshistorie</td>
    <td class="text-align-center">Nøytral</td>
    <td class="text-align-right">Rett på sak</td>
</tr>
</table>
<br><br>
<div class="btncontainer">
<button class="btn submit" type="submit">
    Submit
</button> 
</div>
</form>
<!------Resultat på undersøkelse----->
<br><br>
    <div class='results'>
        Her kommer resultat:<br>
        <pre></pre>
    </div>
</div>
</div>

<!--------Javascript for dokumentet------>

<script>

    //Sjekker om skjemaet er fylt ut fra før og skriver ut en melding til div-elementet med ID "localstorage-tekst".
    if (localStorage.trxid) {
      document.getElementById("localstorage-tekst").innerHTML = "<span style='color: red;'>Du har allerede fylt ut dette skjemaet, men du er velkommen til å fylle ut en gang til!</span><br><br>";
    }

   // From https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch (seen 2021-09-27)
   // Example POST method implementation using fetch:
   async function postData(url = '', data = {}) {
       // Default options are marked with *
       const response = await fetch(url, {
           method: 'POST', // *GET, POST, PUT, DELETE, etc.
           mode: 'cors', // no-cors, *cors, same-origin
           cache: 'no-cache', // *default, no-cache, reload, force-cache,only-if-cached
           credentials: 'same-origin', // include, *same-origin, omit
           headers: {
               'Content-Type': 'application/json',
                // 'Content-Type': 'application/x-www-form-urlencoded',
           },
           redirect: 'follow', // manual, *follow, error
           referrerPolicy: 'no-referrer', // no-referrer,*no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
           body: JSON.stringify(data) // body data type must match"Content-Type"header
       });
       return response.json(); // parses JSON response into native JavaScriptobjects
   }

   function handleSubmit(event) {
        event.preventDefault();
        const data = new FormData(event.target);
        const formJSON = Object.fromEntries(data.entries());
        const results = document.querySelector('.results pre');
        postData('https://bacit.info/', formJSON)
        .then(data => {
            let trxid = JSON.stringify(data.trxid, null, 2).replace(/"/g, "");
            let time = JSON.stringify(data.time, null, 2).replace(/"/g, "");
            localStorage.setItem("trxid", trxid);
            localStorage.setItem("time", time);
           results.innerText = JSON.stringify(data, null, 2);
        document.getElementById("HWR-form").reset();
        
        ScrollDown();
        return false;
        });
   }
   const form = document.querySelector('form');
   form.addEventListener('submit', handleSubmit);
   

   // just an alert message for when users try to use the search bar
   function OnlyAPlaceHolder(){
	  alert("this item doesn't have much functionality yet and is only a placeholder")
  }

function ScrollDown(){window.scrollTo(0,document.body.scrollHeight);}


</script>
</body>
</html>